# OPUS Books English-German configuration
# REQUIRED for ContraPro evaluation (pronoun disambiguation En→De)

name: opus_books_en_de

# Dataset type - CRITICAL for document-level coherence evaluation
# opus_books: Literary texts with document structure (consecutive entries from same book)
# This enables proper document-level learning with CAT-N augmentation
dataset_name: opus_books

# Tokenizer settings
tokenizer_type: custom  # 32K BPE (RECOMMENDED)
tokenizer_path: data/tokenizer/tokenizer.json

# Language settings - SWAPPED for En→De (required for ContraPro)
src_lang: en_XX
tgt_lang: de_DE

# Sequence lengths
max_src_length: 4096
max_tgt_length: 4096

# CAT-N augmentation - CRITICAL for document-level learning
# Concatenates N consecutive sentences from same document
cat_n: 5  # CAT-5 strategy (recommended in SSM-MT paper)
p_concat: 0.5  # 50% single, 50% concatenated

# Collation mode
collator_mode: packed  # 20-30% faster on H100

# Data loading - Optimized for 26-core Xeon with 1x H100 80GB
num_workers: 20
prefetch_factor: 8

# Validation split ratio (OPUS Books only has train split)
val_ratio: 0.05
